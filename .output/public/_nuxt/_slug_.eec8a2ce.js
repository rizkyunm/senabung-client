import{_ as S,a as V}from"./Footer.cc62e973.js";import{_ as A}from"./ErrorModal.85fa5f97.js";import{f as z,B as E,g as K,u as G,C as I,r as x,h as _,x as L,o as s,c as a,a as t,i as f,j as e,v as l,t as r,A as U,D as J,E as q,l as H,n as k,y as B,z as O,d as P,w as j,T as Q,G as W}from"./entry.3e678935.js";import{c as X}from"./date.044cb15a.js";import"./nuxt-link.19ed2f35.js";const Y={class:"project-header"},Z={class:"project-header pt-5"},tt={class:"container mx-auto relative"},et={key:0,class:"container mx-auto relative"},st=t("div",{class:"flex justify-center mt-3 h-96"},[t("span",{class:"loading loading-spinner loading-lg align-middle"})],-1),ot=[st],at={key:1,class:"container mx-auto relative mt-10"},nt={class:"flex justify-center mt-3"},it={class:"w-3/4 lg:w-1/2 mx-auto"},lt={class:"w-1/2 bg-white mb-3 border border-gray-400 rounded-20 inline-block"},rt={class:""},ct=["src"],dt={class:"w-1/2 inline-block pl-5 align-top"},ut={class:"text-2xl text-orange-button mb-10 font-medium"},_t=W('<div class="font-light text-md text-gray-400"><div class="w-1/2 inline-block">Terkumpul</div><div class="w-1/2 inline-block text-right">Tersalurkan</div></div><div class="text-md text-green-button"><div class="w-1/2 inline-block">Rp 20,000,000</div><div class="w-1/2 inline-block text-right">Rp 10,000,000</div></div>',2),mt={class:"font-light mt-8 text-md text-gray-400"},ht={class:"w-1/2 inline-block"},pt=t("div",{class:"w-1/2 inline-block text-right"},null,-1),gt={class:"relative progress-bar"},bt={class:"overflow-hidden mb-4 text-xs flex rounded-full bg-gray-200 h-6"},vt={class:"flex progress-info mb-6 text-green-button"},xt={class:"text-xl"},ft={class:"ml-auto font-semibold text-xl"},kt=["onKeyup"],yt=["disabled"],wt={key:2,class:"container mx-auto relative pt-8 mb-20"},Ct={class:"flex justify-center"},Tt={class:"w-3/4 lg:w-1/2"},Bt={class:"tabs"},jt=t("hr",{class:"mb-5"},null,-1),Nt={key:0},Rt={class:"font-bold text-xl mb-5"},Dt={class:"font-light text-justify text-xl mb-5"},$t={key:1},Ft={key:0},Mt=t("h2",{class:"h-56"},"Belum ada transaksi",-1),St=[Mt],Vt={key:1},At=t("hr",{class:"my-3"},null,-1),zt={class:"text-green-progress"},Et={class:"text-light text-xs"},Kt={key:2},Gt={key:0},It=t("h2",{class:"h-56"},"Belum ada donasi tersalurkan",-1),Lt=[It],Ut={key:1},Jt=t("div",null,"Ada donasi",-1),qt=[Jt],Ht=t("h3",{class:"font-bold text-lg text-rose-800"},"Transaksi Gagal !",-1),Ot={class:"py-4"},ee=z({__name:"[slug]",setup(Pt){const N=E(),{token:R,status:D}=K(),{$api:p}=G(),y=I(),g=y.params.slug;let o=x({id:0,name:"",short_description:"",description:"",campaign_image:"",goal_amount:0,current_amount:0,slug:"",user_id:0,backer_count:0,status:""}),m=x([]),u=x({amount:0,campaign_id:0}),w=_([]);const C=async()=>{try{if(D.value!=="authenticated")N.push("/masuk?callbackUrl="+y.path);else{let d=await p.transaction.create(R.value,u);window.location.href=d.payment_url}}catch{T.value="Transaksi belum dapat proses silahkan coba lagi nanti",b.value=!0}},T=_(""),b=_(!1),c=_("detail"),h=_(!1),v=d=>{c.value=d};return L(async()=>{try{o=await p.campaign.getBySlug(typeof g=="string"?g:g[0]),m=await p.transaction.listByCampaign(o.id),u.campaign_id=o.id,h.value=!0}catch(d){console.error(d)}}),(d,n)=>{const $=S,F=V,M=A;return s(),a(B,null,[t("div",Y,[t("section",Z,[t("div",tt,[f($)])]),e(h)?l("",!0):(s(),a("section",et,ot)),e(h)?(s(),a("section",at,[t("div",nt,[t("div",it,[t("div",lt,[t("figure",rt,[t("img",{src:e(o).campaign_image,alt:"",class:"rounded-20 w-full"},null,8,ct)])]),t("div",dt,[t("h2",ut,r(e(o).name),1),_t,t("div",mt,[t("div",ht,r(e(o).backer_count)+" donatur ",1),pt]),t("div",gt,[t("div",bt,[t("div",{style:U("width: "+e(o).current_amount/e(o).goal_amount*100+"%"),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-green-progress progress-striped"},null,4)])]),t("div",vt,[t("div",xt,r((e(o).current_amount/e(o).goal_amount*100).toFixed(2))+"% ",1),t("div",ft," Rp "+r(new Intl.NumberFormat().format(e(o).goal_amount)),1)]),J(t("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>e(u).amount=i),type:"number",class:"border border-gray-500 block w-full px-6 py-3 mt-4 rounded-full text-gray-800 transition duration-300 ease-in-out focus:outline-none focus:shadow-outline",placeholder:"Jumlah dalam rupiah (min Rp 10.000)",onKeyup:H(C,["enter"])},null,40,kt),[[q,e(u).amount,void 0,{number:!0}]]),t("button",{disabled:e(u).amount<1e4,class:"text-center mt-3 button-cta block w-full bg-orange-button hover:bg-green-button text-white font-medium px-6 py-3 text-md rounded-full disabled:bg-orange-disable",onClick:C}," Donasi Sekarang ",8,yt)])])])])):l("",!0),e(h)?(s(),a("section",wt,[t("div",Ct,[t("div",Tt,[t("div",Bt,[t("a",{class:k([e(c)==="detail"?"tab-active":"","tab tab-bordered"]),onClick:n[1]||(n[1]=i=>v("detail"))},"Detail",2),t("a",{class:k([e(c)==="masuk"?"tab-active":"","tab tab-bordered"]),onClick:n[2]||(n[2]=i=>v("masuk"))},"Donasi Masuk",2),t("a",{class:k([e(c)==="keluar"?"tab-active":"","tab tab-bordered"]),onClick:n[3]||(n[3]=i=>v("keluar"))},"Donasi Tersalurkan",2)]),jt,e(c)==="detail"?(s(),a("div",Nt,[t("p",Rt,r(e(o).short_description),1),t("p",Dt,r(e(o).description),1)])):l("",!0),e(c)==="masuk"?(s(),a("div",$t,[e(m).length===0?(s(),a("div",Ft,St)):l("",!0),e(m).length>0?(s(),a("div",Vt,[(s(!0),a(B,null,O(e(m),i=>(s(),a("div",{key:i.id},[At,t("h2",null,r(i.donor),1),t("p",zt," Rp "+r(new Intl.NumberFormat().format(i.amount)),1),t("p",Et,r(e(X)(i.created_at)),1)]))),128))])):l("",!0)])):l("",!0),e(c)==="keluar"?(s(),a("div",Kt,[e(w).length===0?(s(),a("div",Gt,Lt)):l("",!0),e(w).length>0?(s(),a("div",Ut,qt)):l("",!0)])):l("",!0)])])])):l("",!0),f(F)]),(s(),P(Q,{to:"body"},[f(M,{show:e(b),onClose:n[4]||(n[4]=i=>b.value=!1)},{header:j(()=>[Ht]),body:j(()=>[t("p",Ot,r(e(T)),1)]),_:1},8,["show"])]))],64)}}});export{ee as default};
